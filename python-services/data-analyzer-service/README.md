# æ•°æ®ä¼˜åŒ–æœåŠ¡ v5.0.0

åŸºäº **LangGraph + Celery + Redis** æ„å»ºçš„åˆ†å¸ƒå¼æ•°æ®ä¼˜åŒ–æœåŠ¡ï¼Œæ”¯æŒ **1 ä¸‡åˆ° 10 ä¸‡æ¡**æ•°æ®çš„é«˜æ•ˆå¤„ç†ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

### ğŸ¯ æ™ºèƒ½åˆ†æ‰¹ç­–ç•¥
- **å…¨é‡è¯Šæ–­**: ä½¿ç”¨å®Œæ•´æ•°æ®é›†è¿›è¡Œè¯­ä¹‰åˆ†å¸ƒåˆ†æï¼Œå‡†ç¡®è¯†åˆ«ç¨€ç¼ºæ ·æœ¬
- **åˆ†æ‰¹ä¼˜åŒ–**: ä»…åœ¨è°ƒç”¨ LLM API çš„é˜¶æ®µï¼ˆä¼˜åŒ–ã€ç”Ÿæˆã€æ ¡éªŒï¼‰è¿›è¡Œåˆ†æ‰¹å¤„ç†
- **å†…å­˜ä¼˜åŒ–**: æ§åˆ¶ LLM è°ƒç”¨çš„å¹¶å‘æ•°ï¼Œé¿å…å†…å­˜æº¢å‡º
- **æ–­ç‚¹ç»­ä¼ **: æ¯æ‰¹å¤„ç†å®Œç«‹å³ä¿å­˜ï¼Œæ”¯æŒä»ä¸­æ–­å¤„ç»§ç»­

### ğŸ’¾ æŒä¹…åŒ–å­˜å‚¨ï¼ˆRedisï¼‰
- ä»»åŠ¡çŠ¶æ€ä¿å­˜åœ¨ Redisï¼ŒæœåŠ¡é‡å¯ä¸ä¸¢å¤±
- æ”¯æŒæ–­ç‚¹ç»­ä¼ ï¼Œä»ä¸­æ–­å¤„ç»§ç»­æ‰§è¡Œ
- åˆ†å¸ƒå¼éƒ¨ç½²ï¼Œå¤šæœºå…±äº«ä»»åŠ¡é˜Ÿåˆ—

### âš¡ å¼‚æ­¥ä»»åŠ¡é˜Ÿåˆ—ï¼ˆCeleryï¼‰
- ç‹¬ç«‹ Worker è¿›ç¨‹å¤„ç†ä»»åŠ¡
- Web æœåŠ¡è½»é‡å¿«é€Ÿï¼Œä¸é˜»å¡
- æ”¯æŒæ¨ªå‘æ‰©å±•ï¼Œå¤š Worker å¹¶è¡Œå¤„ç†

### ğŸ“Š å®æ—¶è¿›åº¦è·Ÿè¸ª
- å®æ—¶æŸ¥çœ‹å¤„ç†è¿›åº¦ï¼ˆ0-100%ï¼‰
- æ˜¾ç¤ºå½“å‰å¤„ç†é˜¶æ®µï¼ˆè¯Šæ–­/ä¼˜åŒ–/æ ¡éªŒ/æ¸…æ´—ï¼‰
- å‰ç«¯è¿›åº¦æ¡å¯è§†åŒ–å±•ç¤º

### ğŸ¯ åŒæ¨¡å¼æ”¯æŒ

1. **æ ‡æ³¨æµç¨‹ä¼˜åŒ–ï¼ˆAuto Modeï¼‰**
   - æ— éœ€ä¼˜åŒ–æŒ‡å¯¼ï¼Œè‡ªåŠ¨è¯Šæ–­å’Œä¼˜åŒ–
   - é€‚ç”¨äºé€šç”¨æ•°æ®é›†ä¼˜åŒ–

2. **æŒ‡å®šä¼˜åŒ–ï¼ˆGuided Modeï¼‰**
   - æä¾›ä¼˜åŒ–æŒ‡å¯¼ï¼ŒæŒ‰æŒ‡å¯¼è¦æ±‚ä¼˜åŒ–
   - é€‚ç”¨äºå·²çŸ¥é—®é¢˜çš„æ•°æ®é›†

## ğŸ”„ å·¥ä½œæµæ¶æ„ï¼ˆæ™ºèƒ½åˆ†æ‰¹ï¼‰

```
åŸå§‹æ•°æ®é›† (1ä¸‡-10ä¸‡æ¡)
    â†“
[Celery é˜Ÿåˆ—] â†’ æäº¤åˆ°å¼‚æ­¥é˜Ÿåˆ—
    â†“
[Worker å¤„ç†] â†’ ç‹¬ç«‹è¿›ç¨‹å¤„ç†
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 1: å…¨é‡è¯Šæ–­ï¼ˆéœ€è¦å®Œæ•´æ•°æ®é›†ï¼‰        â”‚
â”‚ - è¯­ä¹‰åˆ†å¸ƒåˆ†æï¼ˆHDBSCAN èšç±»ï¼‰           â”‚
â”‚ - è¯†åˆ«ç¨€ç¼ºèšç±»å’Œä½è´¨é‡æ ·æœ¬               â”‚
â”‚ - ä¸è°ƒç”¨ LLMï¼Œçº¯è®¡ç®—ï¼Œé€Ÿåº¦å¿«             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 2: åˆ†æ‰¹ä¼˜åŒ–ï¼ˆè°ƒç”¨ LLM APIï¼‰         â”‚
â”‚ - å°†ä½è´¨é‡æ ·æœ¬åˆ†æ‰¹è¿›è¡Œ COT é‡å†™          â”‚
â”‚ - æ¯æ‰¹ 50 æ¡ï¼Œæ§åˆ¶ API è°ƒç”¨é¢‘ç‡          â”‚
â”‚ - å®æ—¶æ›´æ–°è¿›åº¦ï¼ˆ0-50%ï¼‰                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 3: åˆ†æ‰¹ç”Ÿæˆï¼ˆè°ƒç”¨ LLM APIï¼‰         â”‚
â”‚ - ä¸ºç¨€ç¼ºèšç±»åˆ†æ‰¹ç”Ÿæˆæ–°æ ·æœ¬               â”‚
â”‚ - æ¯æ‰¹ 50 æ¡ï¼Œæ§åˆ¶ç”Ÿæˆé€Ÿåº¦               â”‚
â”‚ - å®æ—¶æ›´æ–°è¿›åº¦ï¼ˆ50-75%ï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 4: åˆ†æ‰¹æ ¡éªŒï¼ˆè°ƒç”¨ LLM APIï¼‰         â”‚
â”‚ - å°†ä¼˜åŒ–å’Œç”Ÿæˆçš„æ ·æœ¬åˆ†æ‰¹è¿›è¡Œ RAG æ ¡éªŒ    â”‚
â”‚ - æ¯æ‰¹ 50 æ¡ï¼Œæ§åˆ¶æ ¡éªŒé€Ÿåº¦               â”‚
â”‚ - å®æ—¶æ›´æ–°è¿›åº¦ï¼ˆ75-95%ï¼‰                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ 5: å…¨é‡æ¸…æ´—ï¼ˆä¸è°ƒç”¨ LLMï¼‰           â”‚
â”‚ - PII éšç§ä¿¡æ¯æ¸…æ´—                       â”‚
â”‚ - çº¯è§„åˆ™å¤„ç†ï¼Œé€Ÿåº¦å¿«                     â”‚
â”‚ - å®Œæˆè¿›åº¦ï¼ˆ95-100%ï¼‰                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
[Redis å­˜å‚¨] â†’ ä¿å­˜æœ€ç»ˆç»“æœ
    â†“
çº¯å‡€çš„é«˜è´¨é‡æ•°æ®é›†
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£… Redis

#### Windows
ä¸‹è½½å¹¶å®‰è£… Redis for Windowsï¼š
```
https://github.com/tporadowski/redis/releases
```

å¯åŠ¨ Redisï¼š
```bash
redis-server
```

#### Linux/Mac
```bash
# Ubuntu/Debian
sudo apt-get install redis-server
sudo systemctl start redis

# Mac
brew install redis
brew services start redis
```

### 2. å®‰è£… Python ä¾èµ–

```bash
# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows:
venv\Scripts\activate
# Linux/Mac:
source venv/bin/activate

# å®‰è£…ä¾èµ–
pip install -r requirements.txt
```

### 3. é…ç½®ç¯å¢ƒ

å¤åˆ¶ `.env.example` ä¸º `.env` å¹¶ä¿®æ”¹é…ç½®ï¼š

```bash
cp .env.example .env
```

å…³é”®é…ç½®é¡¹ï¼š
```env
# LLM API å¯†é’¥
LLM_API_KEY=your_api_key_here

# Redis è¿æ¥
REDIS_HOST=localhost
REDIS_PORT=6379

# æ‰¹æ¬¡å¤§å°ï¼ˆæ ¹æ®å†…å­˜è°ƒæ•´ï¼‰
BATCH_SIZE=50

# æœ€å¤§ Worker æ•°
MAX_WORKERS=4
```

### 4. å¯åŠ¨æœåŠ¡

#### æ–¹å¼ä¸€ï¼šä¸€é”®å¯åŠ¨ï¼ˆæ¨èï¼‰

```bash
# Windows
start-all.bat

# Linux/Mac
./start-all.sh
```

è¿™å°†å¯åŠ¨ï¼š
- FastAPI æœåŠ¡ï¼ˆç«¯å£ 8001ï¼‰
- Celery Workerï¼ˆ4 ä¸ªå¹¶å‘ï¼‰
- Flower ç›‘æ§é¢æ¿ï¼ˆç«¯å£ 5555ï¼‰

#### æ–¹å¼äºŒï¼šåˆ†åˆ«å¯åŠ¨

```bash
# 1. å¯åŠ¨ API æœåŠ¡
# Windows: start-api.bat
# Linux/Mac: python app.py

# 2. å¯åŠ¨ Celery Worker
# Windows: start-worker.bat
# Linux/Mac: celery -A celery_app worker --concurrency=4

# 3. å¯åŠ¨ Flower ç›‘æ§ï¼ˆå¯é€‰ï¼‰
# Windows: start-flower.bat
# Linux/Mac: celery -A celery_app flower --port=5555
```

### 5. æµ‹è¯•åŠŸèƒ½

```bash
python test_large_dataset.py
```

## ğŸ“¡ API ä½¿ç”¨

### æäº¤ä¼˜åŒ–ä»»åŠ¡ï¼ˆå¼‚æ­¥ï¼‰

```python
import requests
import time

# 1. æäº¤ä»»åŠ¡
response = requests.post("http://localhost:8001/api/v1/optimize", json={
    "dataset": [
        {"question": "ä»€ä¹ˆæ˜¯æœºå™¨å­¦ä¹ ï¼Ÿ", "answer": "..."},
        # ... æ›´å¤šæ•°æ®ï¼ˆæ”¯æŒ 1ä¸‡-10ä¸‡æ¡ï¼‰
    ],
    "knowledge_base": ["æœºå™¨å­¦ä¹ æ˜¯...", "æ·±åº¦å­¦ä¹ æ˜¯..."],
    "save_reports": True
})

task_id = response.json()["task_id"]
print(f"ä»»åŠ¡ID: {task_id}")

# 2. è½®è¯¢è¿›åº¦
while True:
    response = requests.get(f"http://localhost:8001/api/v1/optimize/{task_id}")
    result = response.json()
    
    print(f"çŠ¶æ€: {result['status']}")
    print(f"è¿›åº¦: {result['progress']}%")
    print(f"æ‰¹æ¬¡: {result['completed_batches']}/{result['total_batches']}")
    
    if result['status'] in ['completed', 'failed']:
        break
    
    time.sleep(5)  # æ¯ 5 ç§’æŸ¥è¯¢ä¸€æ¬¡

# 3. è·å–ç»“æœ
if result['status'] == 'completed':
    optimized_dataset = result['optimized_dataset']
    statistics = result['statistics']
    print(f"ä¼˜åŒ–å®Œæˆ: {len(optimized_dataset)} æ ·æœ¬")
```

### åŒæ­¥ä¼˜åŒ–ï¼ˆä»…å°æ•°æ®é›†ï¼‰

```python
# ä»…é€‚ç”¨äº < 100 æ ·æœ¬
response = requests.post("http://localhost:8001/api/v1/optimize/sync", json={
    "dataset": [...],  # å°æ•°æ®é›†
})

result = response.json()
```

## ğŸ“Š API ç«¯ç‚¹

| ç«¯ç‚¹ | æ–¹æ³• | è¯´æ˜ |
|------|------|------|
| `/api/v1/optimize` | POST | æäº¤ä¼˜åŒ–ä»»åŠ¡ï¼ˆå¼‚æ­¥ï¼‰ |
| `/api/v1/optimize/{task_id}` | GET | æŸ¥è¯¢ä»»åŠ¡çŠ¶æ€å’Œè¿›åº¦ |
| `/api/v1/optimize/sync` | POST | åŒæ­¥ä¼˜åŒ–ï¼ˆä»…å°æ•°æ®é›†ï¼‰ |
| `/api/v1/tasks` | GET | åˆ—å‡ºæ‰€æœ‰ä»»åŠ¡ |
| `/api/v1/tasks/{task_id}/resume` | POST | æ¢å¤ä¸­æ–­çš„ä»»åŠ¡ |
| `/api/v1/tasks/{task_id}` | DELETE | åˆ é™¤ä»»åŠ¡ |
| `/api/v1/health` | GET | å¥åº·æ£€æŸ¥ |
| `/api/v1/stats` | GET | ç³»ç»Ÿç»Ÿè®¡ |

å®Œæ•´ API æ–‡æ¡£ï¼šhttp://localhost:8001/docs

## ğŸ“ˆ æ€§èƒ½åŸºå‡†

| æ•°æ®é‡ | è¯Šæ–­æ—¶é—´ | ä¼˜åŒ–æ—¶é—´ | æ€»æ—¶é—´ | è¯´æ˜ |
|--------|----------|----------|--------|------|
| 1,000 | ~30ç§’ | 5-10åˆ†é’Ÿ | 5-10åˆ†é’Ÿ | è¯Šæ–­å¿«é€Ÿï¼Œä¸»è¦æ—¶é—´åœ¨ LLM è°ƒç”¨ |
| 10,000 | ~2åˆ†é’Ÿ | 30-60åˆ†é’Ÿ | 30-60åˆ†é’Ÿ | è¯Šæ–­ä»ç„¶å¿«é€Ÿ |
| 100,000 | ~10åˆ†é’Ÿ | 4-8å°æ—¶ | 4-8å°æ—¶ | è¯Šæ–­å æ¯”å¾ˆå° |

**å…³é”®ä¼˜åŠ¿**:
- âœ… è¯Šæ–­é˜¶æ®µä½¿ç”¨å…¨é‡æ•°æ®ï¼Œä¿è¯å‡†ç¡®æ€§
- âœ… ä¼˜åŒ–é˜¶æ®µåˆ†æ‰¹è°ƒç”¨ LLMï¼Œæ§åˆ¶æˆæœ¬å’Œé€Ÿåº¦
- âœ… è¯Šæ–­æ—¶é—´ä¸æ•°æ®é‡çº¿æ€§å¢é•¿ï¼Œä½†å æ¯”å¾ˆå°ï¼ˆ< 5%ï¼‰
- âœ… ä¼˜åŒ–æ—¶é—´å¯é€šè¿‡å¢åŠ  Worker æ•°é‡çº¿æ€§å‡å°‘

*å®é™…æ—¶é—´å–å†³äº LLM API å“åº”é€Ÿåº¦å’Œç½‘ç»œçŠ¶å†µ*

## ğŸ”§ ç›‘æ§å·¥å…·

### Flower ç›‘æ§é¢æ¿
è®¿é—® http://localhost:5555 æŸ¥çœ‹ï¼š
- å®æ—¶ä»»åŠ¡çŠ¶æ€
- Worker è´Ÿè½½
- ä»»åŠ¡æ‰§è¡Œå†å²
- æ€§èƒ½æŒ‡æ ‡

### Redis ç›‘æ§
```bash
redis-cli
> KEYS task:*  # æŸ¥çœ‹æ‰€æœ‰ä»»åŠ¡
> HGETALL task:task_abc123  # æŸ¥çœ‹ä»»åŠ¡è¯¦æƒ…
```

## ğŸ—ï¸ æŠ€æœ¯æ¶æ„

### åˆ†å¸ƒå¼æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FastAPI   â”‚â”€â”€â”€â”€â”€â–¶â”‚    Redis    â”‚â—€â”€â”€â”€â”€â”€â”‚   Celery    â”‚
â”‚  (API å±‚)   â”‚      â”‚  (ä»»åŠ¡é˜Ÿåˆ—)  â”‚      â”‚  (Worker)   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚                     â”‚                     â”‚
       â”‚                     â”‚                     â”‚
       â–¼                     â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              LangGraph å·¥ä½œæµå¼•æ“                    â”‚
â”‚  (è¯Šæ–­ â†’ ä¼˜åŒ– â†’ æ ¡éªŒ â†’ æ¸…æ´—)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ™ºèƒ½ä½“

- **DiagnosticAgent**ï¼šè¯Šæ–­æ™ºèƒ½ä½“ï¼ˆè¯­ä¹‰åˆ†å¸ƒ + æ¨ç†è´¨é‡ï¼‰
- **OptimizationAgent**ï¼šä¼˜åŒ–æ™ºèƒ½ä½“ï¼ˆCOT é‡å†™ + åˆæˆç”Ÿæˆï¼‰
- **VerificationAgent**ï¼šæ ¡éªŒæ™ºèƒ½ä½“ï¼ˆRAG æ ¡éªŒï¼‰
- **CleaningAgent**ï¼šæ¸…æ´—æ™ºèƒ½ä½“ï¼ˆPII æ¸…æ´—ï¼‰

## ğŸ“ é¡¹ç›®ç»“æ„

```
python-services/data-analyzer-service/
â”œâ”€â”€ app.py                          # FastAPI åº”ç”¨
â”œâ”€â”€ celery_app.py                   # Celery é…ç½®
â”œâ”€â”€ tasks.py                        # Celery ä»»åŠ¡
â”œâ”€â”€ task_manager.py                 # ä»»åŠ¡ç®¡ç†å™¨ï¼ˆRedisï¼‰
â”œâ”€â”€ workflow_graph.py               # LangGraph å·¥ä½œæµ
â”œâ”€â”€ storage_manager.py              # å­˜å‚¨ç®¡ç†å™¨
â”œâ”€â”€ knowledge_base_manager.py       # çŸ¥è¯†åº“ç®¡ç†
â”œâ”€â”€ agents/                         # æ™ºèƒ½ä½“
â”‚   â”œâ”€â”€ diagnostic_agent.py
â”‚   â”œâ”€â”€ optimization_agent.py
â”‚   â”œâ”€â”€ verification_agent.py
â”‚   â””â”€â”€ cleaning_agent.py
â”œâ”€â”€ config.py                       # é…ç½®
â”œâ”€â”€ requirements.txt                # ä¾èµ–
â”œâ”€â”€ start-all.bat                   # ä¸€é”®å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-api.bat                   # API å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-worker.bat                # Worker å¯åŠ¨è„šæœ¬
â”œâ”€â”€ start-flower.bat                # Flower å¯åŠ¨è„šæœ¬
â”œâ”€â”€ test_large_dataset.py           # å¤§æ•°æ®é›†æµ‹è¯•
â”œâ”€â”€ README.md                       # æœ¬æ–‡æ¡£
â”œâ”€â”€ DEPLOYMENT_GUIDE.md             # éƒ¨ç½²æŒ‡å—
â””â”€â”€ README_UPGRADE.md               # å‡çº§è¯´æ˜
```

## ğŸ”§ é…ç½®è¯´æ˜

### æ€§èƒ½è°ƒä¼˜

**å°æ•°æ®é›†ï¼ˆ< 1,000ï¼‰**:
```env
BATCH_SIZE=100
MAX_WORKERS=2
```

**ä¸­ç­‰æ•°æ®é›†ï¼ˆ1,000 - 10,000ï¼‰**:
```env
BATCH_SIZE=50
MAX_WORKERS=4
```

**å¤§æ•°æ®é›†ï¼ˆ10,000 - 100,000ï¼‰**:
```env
BATCH_SIZE=50
MAX_WORKERS=8
```

### åˆ†å¸ƒå¼éƒ¨ç½²

åœ¨å¤šå°æœºå™¨ä¸Šå¯åŠ¨ Workerï¼Œå…±äº«åŒä¸€ä¸ª Redisï¼š

```bash
# æœºå™¨ 1: API æœåŠ¡
python app.py

# æœºå™¨ 2-N: Worker
celery -A celery_app worker --concurrency=4
```

## ğŸ› æ•…éšœæ’æŸ¥

### Redis è¿æ¥å¤±è´¥
```bash
redis-cli ping  # åº”è¿”å› PONG
```

### Worker æ— æ³•å¯åŠ¨
```bash
# Windows ä½¿ç”¨ solo æ± 
celery -A celery_app worker --pool=solo

# Linux/Mac ä½¿ç”¨é»˜è®¤æ± 
celery -A celery_app worker
```

### ä»»åŠ¡å¡ä½
- æŸ¥çœ‹ Worker æ—¥å¿—
- æ£€æŸ¥ Redis è¿æ¥
- é‡å¯ Worker

### å†…å­˜ä¸è¶³
- å‡å° `BATCH_SIZE`
- å‡å°‘ Worker å¹¶å‘æ•°
- å¢åŠ æœåŠ¡å™¨å†…å­˜

## ğŸ“š æ–‡æ¡£

- [éƒ¨ç½²æŒ‡å—](DEPLOYMENT_GUIDE.md) - è¯¦ç»†çš„éƒ¨ç½²å’Œé…ç½®è¯´æ˜
- [å‡çº§è¯´æ˜](README_UPGRADE.md) - ä» v4.0 å‡çº§åˆ° v5.0 çš„æŒ‡å—
- [å¿«é€Ÿå¼€å§‹](QUICK_START.md) - å¿«é€Ÿä¸Šæ‰‹æ•™ç¨‹
- [API æ–‡æ¡£](http://localhost:8001/docs) - Swagger UI

## ğŸ‰ ç‰ˆæœ¬å†å²

- **v5.0.0** (2026-01-12)
  - âœ… åˆ†ç‰‡å¤„ç† - æ”¯æŒå¤§è§„æ¨¡æ•°æ®
  - âœ… Redis æŒä¹…åŒ– - ä»»åŠ¡çŠ¶æ€ä¸ä¸¢å¤±
  - âœ… Celery å¼‚æ­¥é˜Ÿåˆ— - åˆ†å¸ƒå¼å¤„ç†
  - âœ… è¿›åº¦è·Ÿè¸ª - å®æ—¶æŸ¥çœ‹è¿›åº¦
  - âœ… æ–­ç‚¹ç»­ä¼  - ä»ä¸­æ–­å¤„ç»§ç»­

- **v4.0.0** (2026-01-10)
  - ä½¿ç”¨ LangGraph é‡æ„
  - æ”¯æŒåŒæ¨¡å¼ï¼ˆauto/guidedï¼‰
  - å¤šæ™ºèƒ½ä½“æ¶æ„

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Web æ¡†æ¶**: FastAPI
- **ä»»åŠ¡é˜Ÿåˆ—**: Celery
- **æ¶ˆæ¯ä»£ç†**: Redis
- **å·¥ä½œæµå¼•æ“**: LangGraph
- **LLM**: OpenAI API
- **Embedding**: Sentence Transformers
- **ç›‘æ§**: Flower

## ğŸ“„ è®¸å¯è¯

MIT License
