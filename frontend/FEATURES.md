# WLOps 前端功能详解

## 功能模块概览

### 1. 仪表盘 (Dashboard)

#### 统计卡片
- **数据集总数** - 显示用户拥有的所有数据集数量
- **任务总数** - 显示用户创建的所有任务数量
- **运行中任务** - 实时显示正在执行的任务数量
- **已完成任务** - 显示成功完成的任务数量

#### 最近任务列表
- 显示最近创建的 5 个任务
- 快速查看任务状态和进度
- 点击任务名称跳转到详情页

---

### 2. 数据集管理 (Dataset Management)

#### 上传数据集
**表单字段：**
- 数据集名称（必填）
- 描述（可选）
- 数据集类型：
  - 训练集 (training)
  - 验证集 (validation)
  - 测试集 (test)
- 领域：
  - 数学 (math)
  - 自然语言处理 (nlp)
  - 计算机视觉 (cv)
  - 其他 (other)
- 文件上传（支持拖拽）

**支持的文件格式：**
- JSON
- CSV
- TXT
- 其他文本格式

#### 数据集列表
**显示信息：**
- 数据集名称
- 领域标签
- 数据集类型
- 文件大小（自动格式化为 B/KB/MB/GB）
- 样本数量
- 是否优化（标识是否为优化后的数据集）
- 创建时间

**操作按钮：**
- 下载 - 获取预签名 URL 并下载
- 删除 - 删除数据集（需确认）

---

### 3. 任务管理 (Task Management)

#### 任务列表
**显示信息：**
- 任务名称（可点击查看详情）
- 模型名称
- 任务模式：
  - 🔵 标准训练流 (STANDARD)
  - 🟣 持续学习流 (CONTINUOUS)
- 任务状态（9 种状态，不同颜色标识）
- 迭代进度（当前/最大）
- 最新评估分数
- 创建时间

**状态说明：**
- 🔵 待处理 (PENDING) - 任务已创建，等待启动
- 🔄 数据优化中 (OPTIMIZING) - 正在优化数据集
- 🔄 训练中 (TRAINING) - 正在训练模型
- 🔄 评估中 (EVALUATING) - 正在评估模型性能
- 🔄 循环中 (LOOPING) - 持续学习模式下的迭代
- ✅ 已完成 (COMPLETED) - 任务成功完成
- ❌ 失败 (FAILED) - 任务执行失败
- ⏸️ 已暂停 (SUSPENDED) - 任务被暂停
- 🚫 已取消 (CANCELLED) - 任务被取消

**操作按钮（根据状态显示）：**
- 启动 - 启动待处理的任务
- 暂停 - 暂停运行中的任务
- 取消 - 取消运行中的任务（需确认）
- 删除 - 删除已完成/失败/取消的任务（需确认）

**实时更新：**
- 每 5 秒自动刷新任务列表
- 自动更新任务状态和进度

---

### 4. 创建任务 (Create Task)

#### 任务模式选择
**标准训练流 (Standard Pipeline)：**
- 执行一次完整的训练流程
- 流程：数据优化 → 训练 → 评估 → 完成
- 适用场景：一次性训练任务

**持续学习流 (Continuous Learning Loop)：**
- 执行多轮迭代训练
- 流程：(数据优化 → 训练 → 评估) × N 轮
- 自动根据评估结果优化数据
- 适用场景：需要持续改进的模型

#### 基础配置
**任务名称：**
- 自定义任务名称
- 用于标识和管理任务

**模型选择：**
- Qwen-7B - 通义千问 7B 参数模型
- Qwen-14B - 通义千问 14B 参数模型
- LLaMA2-7B - Meta LLaMA2 7B 参数模型
- LLaMA2-13B - Meta LLaMA2 13B 参数模型

**数据集选择：**
- 从已上传的数据集中选择
- 仅显示原始数据集（非优化数据集）
- 显示数据集名称和领域

#### 超参数配置
**学习率 (Learning Rate)：**
- 范围：0.00001 - 0.1
- 步长：0.0001
- 默认值：0.001
- 说明：控制模型参数更新的速度

**训练轮数 (Epochs)：**
- 范围：1 - 100
- 默认值：10
- 说明：完整遍历训练数据的次数

**批次大小 (Batch Size)：**
- 范围：1 - 256
- 默认值：32
- 说明：每次训练使用的样本数量

#### 持续学习配置（仅持续学习流）
**最大迭代次数 (Max Iterations)：**
- 范围：1 - 20
- 默认值：5
- 说明：最多执行的迭代轮数

**性能阈值 (Performance Threshold)：**
- 范围：0 - 1
- 步长：0.01
- 默认值：0.95
- 说明：达到此分数时自动停止迭代

**终止条件：**
- 达到最大迭代次数
- 或达到性能阈值
- 两者满足其一即停止

---

### 5. 任务详情 (Task Detail)

#### 任务信息卡片
**基本信息：**
- 任务 ID - 唯一标识符
- 任务名称
- 任务状态（带颜色标签）
- 任务模式（标准/持续学习）
- 模型名称
- 数据集 ID

**进度信息：**
- 当前迭代 / 最大迭代
- 性能阈值（持续学习流）
- 最新评估分数

**时间信息：**
- 创建时间
- 开始时间
- 完成时间（如已完成）

**配置信息：**
- 超参数（JSON 格式展示）
  - learning_rate
  - epochs
  - batch_size

**错误信息：**
- 如果任务失败，显示错误详情

#### 任务控制按钮
**根据任务状态显示：**
- PENDING 状态：显示"启动"按钮
- 运行中状态：显示"暂停"和"取消"按钮
- 终态（完成/失败/取消）：无控制按钮

#### 执行历史时间线
**时间线展示：**
- 按时间倒序排列
- 每个阶段独立显示
- 图标表示状态：
  - ✅ 已完成 - 绿色对勾
  - 🔄 运行中 - 蓝色旋转图标
  - ❌ 失败 - 红色叉号
  - ⏸️ 待执行 - 灰色时钟

**每条记录包含：**
- 迭代轮次
- 执行阶段：
  - 数据优化 (optimization)
  - 模型训练 (training)
  - 模型评估 (evaluation)
- 执行状态
- 开始时间
- 完成时间
- 耗时（自动格式化为小时/分钟/秒）
- 评估分数（评估阶段）
- 输出数据集 ID（优化阶段）
- 模型路径（训练阶段）
- 错误信息（如有）

**实时更新：**
- 每 3 秒自动刷新
- 实时显示最新执行状态

---

## 交互特性

### 1. 实时更新
- 任务列表：5 秒轮询
- 任务详情：3 秒轮询
- 自动清理定时器，避免内存泄漏

### 2. 操作确认
- 删除数据集：需要确认
- 取消任务：需要确认
- 删除任务：需要确认

### 3. 加载状态
- 列表加载：显示 Spin 组件
- 按钮操作：显示 loading 状态
- 空数据：显示 Empty 组件

### 4. 错误提示
- 操作成功：绿色 message 提示
- 操作失败：红色 message 提示
- 网络错误：显示具体错误信息

### 5. 导航跳转
- 点击任务名称：跳转到任务详情
- 面包屑导航：返回上一页
- 侧边栏导航：快速切换模块

---

## 数据格式

### 超参数 JSON 格式
```json
{
  "learning_rate": 0.001,
  "epochs": 10,
  "batch_size": 32
}
```

### 时间格式
- 列表显示：`YYYY-MM-DD HH:mm`
- 详情显示：`YYYY-MM-DD HH:mm:ss`

### 文件大小格式
- 小于 1KB：显示 B
- 小于 1MB：显示 KB
- 小于 1GB：显示 MB
- 大于 1GB：显示 GB

### 时长格式
- 小于 1 分钟：显示秒
- 小于 1 小时：显示分钟和秒
- 大于 1 小时：显示小时和分钟

---

## 响应式设计

### 布局适配
- 侧边栏可折叠
- 表格自动滚动
- 卡片自适应宽度

### 移动端支持
- 当前版本主要针对桌面端
- 建议使用 1280px 以上分辨率

---

## 性能优化

### 列表渲染
- 使用 key 优化渲染
- 避免不必要的重渲染

### 网络请求
- 合理的轮询间隔
- 错误重试机制
- 请求取消（组件卸载时）

### 代码分割
- 路由级别的代码分割
- 按需加载组件

---

## 安全特性

### 输入验证
- 表单字段验证
- 文件类型检查
- 数值范围限制

### 操作确认
- 危险操作需要二次确认
- 防止误操作

### 错误处理
- 友好的错误提示
- 不暴露敏感信息

---

## 未来功能规划

### 短期（1-2 周）
- [ ] 批量删除数据集
- [ ] 批量删除任务
- [ ] 任务搜索功能
- [ ] 数据集筛选功能

### 中期（1 个月）
- [ ] 训练曲线可视化
- [ ] 性能趋势图表
- [ ] 任务对比功能
- [ ] 导出报告（PDF/Excel）

### 长期（3 个月）
- [ ] 用户认证系统
- [ ] 权限管理
- [ ] 团队协作
- [ ] 任务模板
- [ ] 自动化工作流
- [ ] WebSocket 实时通信
- [ ] 暗色主题
- [ ] 国际化支持

---

**版本**: 1.0.0  
**最后更新**: 2026-01-10
